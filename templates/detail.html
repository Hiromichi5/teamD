<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
      crossorigin="anonymous"
    />
    <script src="/static/snowfall-op.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/JQuery-Snowfall/1.7.4/snowfall.jquery.min.js"></script>

    <link rel="stylesheet" href="/static/style.css" />
    <title>Sweets Database</title>
  </head>
  <body>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://kit.fontawesome.com/a0cc861018.js"
      crossorigin="anonymous"
    ></script>
    <nav class="navbar">
      <div class="container-fluid">
        <a class="navbar-brand d-flex align-items-center" href="./">
          <img
            src="{{url_for('static', filename='/img/icon-chara.png')}}"
            alt=""
            width="90"
            height="90"
            class="d-inline-block align-text-top logo"
          />
          お菓子ニュース
        </a>
      </div>
    </nav>
    <section class="item-detail">
      <h2>
        最新情報 {% if genre == 'snack' %}
        <span id="heading-snack">スナック</span>
        {% elif genre == 'choco' %}
        <span id="heading-choco">チョコレート</span>
        {% elif genre == 'cookie' %}
        <span id="heading-cookie">クッキー</span>
        {% elif genre == 'candy' %}
        <span id="heading-candy">アメ・ガム</span>
        {% elif genre == 'japanese' %}
        <span id="heading-japanese">せんべい・和風</span>
        {% elif genre == 'limited' %}
        <span id="heading-limited">限定お菓子</span>
        {% endif %}
      </h2>
      <div class="container">
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3">
          {% for item in items %}
          <div class="col py-3">
            <div
              class="mx-1 align-items-center item-card openModalBtn d-flex justify-content-center"
              data-modal-id="modalArea_{{item.id}}"
            >
              <div>
                <img src="{{ item.image }}" alt="" />
                <p class="text-center">{{item.name}}</p>
                <p class="text-center">（ {{item.date}}登録 ）</p>
              </div>
            </div>
          </div>

          <div id="modalArea_{{item.id}}" class="modalArea">
            <div id="modalBg_{{item.id}}" class="modalBg"></div>
            <div class="modalWrapper">
              <div class="modalContents">
                <h3 class="my-3">{{item.name}}</h3>
                <div class="row my-3 row-cols-1 row-cols-md-2">
                  <div
                    class="col-12 col-md-5 d-flex align-content-center justify-content-center"
                  >
                    <img src="{{item.image}}" class="img-fluid" />
                  </div>
                  <div class="col-12 col-md-7 d-none d-sm-block">
                    <table class="table">
                      <tbody>
                        <tr>
                          <th scope="row">商品名</th>
                          <td>{{item.name}}</td>
                        </tr>
                        <tr>
                          <th scope="row">メーカー</th>
                          <td>{{item.maker}}</td>
                        </tr>
                        <tr>
                          <th scope="row">登録日</th>
                          <td>{{ item.date }}</td>
                        </tr>
                        <tr>
                          <th scope="row">値段</th>
                          {% if item.price != None %}
                          <td>{{ item.price }}円</td>
                          {% endif %}
                        </tr>
                        <tr>
                          <th scope="row">商品紹介URL</th>
                          <td>
                            <a class="text-break" href="{{item.url}}"
                              >{{item.url}}</a
                            >
                          </td>
                        </tr>
                        <tr>
                          <th scope="row">タグ</th>
                          {% if item.tags != None %}
                          <td>{{ item.tags }}</td>
                          {% endif %}
                        </tr>
                        <tr>
                          <th scope="row">コメント</th>
                          {% autoescape false %}
                          <td>{{item.comment}}</td>
                          {% endautoescape %}
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <div class="col-12 col-md-7 d-sm-none d-block">
                    <p>
                      <span class="fw-semibold">商品名</span><br />
                      {{item.name}}
                    </p>
                    <p>
                      <span class="fw-semibold">メーカー</span><br />
                      {{item.maker}}
                    </p>
                    <p>
                      <span class="fw-semibold">登録日</span><br />
                      {{item.date}}
                    </p>
                    <p>
                      <span class="fw-semibold">値段</span><br />
                      {% if item.price != None %} {{ item.price }}円 {% endif %}
                    </p>
                    <p>
                      <span class="fw-semibold">商品紹介URL</span><br />
                      <a class="text-break" href="{{item.url}}">{{item.url}}</a>
                    </p>
                    <p>
                      <span class="fw-semibold">タグ</span><br />
                      {% if item.tags != None %}{{item.tags}} {% endif %}
                    </p>
                    <p>
                      <span class="fw-semibold">コメント</span><br />
                      {% autoescape false %} {{item.comment}} {% endautoescape
                      %}
                    </p>
                  </div>
                </div>
              </div>
              <div id="closeModal_{{item.id}}" class="closeModal">×</div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </section>
    <section class="latest-info move-box">
      <h2>最新情報</h2>
      <div class="container">
        <div class="row row-cols-1 row-cols-md-3 g-4">
          <div class="col">
            <a href="./snack" class="text-decoration-none">
              <div class="card h-100" id="latest-snack">
                <div class="card-body">
                  <h4>スナック</h4>
                </div>
                <img
                  src="{{url_for('static', filename='/img/icon-snack.png')}}"
                  class="card-img-bottom"
                  alt="..."
                />
              </div>
            </a>
          </div>
          <div class="col">
            <a href="./chocolate" class="text-decoration-none">
              <div class="card h-100" id="latest-choco">
                <div class="card-body">
                  <h4>チョコレート</h4>
                </div>
                <img
                  src="{{url_for('static', filename='/img/icon-choco.png')}}"
                  class="card-img-bottom"
                  alt="..."
                />
              </div>
            </a>
          </div>
          <div class="col">
            <a href="./cookie" class="text-decoration-none">
              <div class="card h-100" id="latest-cookie">
                <div class="card-body">
                  <h4>クッキー</h4>
                </div>
                <img
                  src="{{url_for('static', filename='/img/icon-cookie.png')}}"
                  class="card-img-bottom"
                  alt="..."
                />
              </div>
            </a>
          </div>
          <div class="col">
            <a href="./candy" class="text-decoration-none">
              <div class="card h-100" id="latest-candy">
                <div class="card-body">
                  <h4>アメ・ガム</h4>
                </div>
                <img
                  src="{{url_for('static', filename='/img/icon-candy.png')}}"
                  class="card-img-bottom"
                  alt="..."
                />
              </div>
            </a>
          </div>
          <div class="col">
            <a href="./japanese" class="text-decoration-none">
              <div class="card h-100" id="latest-japanese">
                <div class="card-body">
                  <h4>せんべい・和風</h4>
                </div>
                <img
                  src="{{url_for('static', filename='/img/icon-japanese.png')}}"
                  class="card-img-bottom"
                  alt="..."
                />
              </div>
            </a>
          </div>
          <div class="col">
            <a href="./limited" class="text-decoration-none">
              <div class="card h-100" id="latest-limited">
                <div class="card-body">
                  <h4>限定お菓子</h4>
                </div>
                <img
                  src="{{url_for('static', filename='/img/icon-limited.png')}}"
                  class="card-img-bottom"
                  alt="..."
                />
              </div>
            </a>
          </div>
        </div>
      </div>
    </section>
    <script>
      $(document).ready(function () {
        $(document).snowfall({
          image: ["/static/img/icon-gummy.png"],
          flakeIndex: 1,
          flakeCount: 3,
          maxSpeed: 0.5,
          minSpeed: 0.5,
          maxSize: 100,
          minSize: 50,
          shadow: false,
        });
      });

      $(function () {
        $(".openModalBtn").click(function () {
          var modalId = $(this).data("modal-id");
          $("#" + modalId).fadeIn();
        });

        $(".closeModal, .modalBg").click(function () {
          var modalId = $(this).closest(".modalArea").attr("id");
          $("#" + modalId).fadeOut();
        });
      });
    </script>
  </body>
</html>
